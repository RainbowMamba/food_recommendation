<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Recommendtion</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

</head>

<body class='container'>

    <article class="start">
        <h1 class="mt-5 text-center">나랑 꼭 닮은 세렝게티 동물은?</h1>
        <button type="button" class="btn btn-secondary mt-5" onclick="start();">테스트 시작하기</button>
    </article>

    <article class="question">
        <div class="progress mt-5">
            <div class="progress-bar" role="progressbar" style="width: calc(100/12*3%)" aria-valuenow="25"
                aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <h2 id="title" class="text-center mt-5">문제</h2>
        <input id="type" type="hidden" value="EI">
        <button id="A" type="button" class="btn btn-primary mt-5">Primary</button>
        <button id='B' type="button" class="btn btn-primary mt-5">Primary</button>
        <button id="C" type="button" class="btn btn-primary mt-5">Primary</button>
        <div id='sListShow'>sList</div>
    </article>

    <article class="result">
        <img id='image' src="lion.jpg" alt="lion" class="rounded mt-5">
        <h2 id="animal" class="text-center mt-5">동물이름</h2>
        <button id='randomSelection' type="button">랜덤으로 선택하기</button> 
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
        <div class="addthis_inline_share_toolbox_oa8x share mt-3"></div>
    </article>

    <article class="kakao_ad mt-5">
    <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-UBXPtVE9V3MI8DLI" data-ad-width="320"
        data-ad-height="100"></ins>
    </article>

    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
    <script>
        var sList = [];
        var num = 1;
        var q = {
            1: { "title": "면 드실?", "A": "응", "B": "아니", "C":"상관없어" },
            2: { "title": "국물 드실?", "A": "응", "B": "아니", "C":"상관없어" },
            3: { "title": "고기 위주로?", "A": "응", "B": "아니", "C":"상관없어" },
        }
        var li = {
            '짜장면':['Y','N','N'], 
            '스파게티':['Y','N','N'],
            '국밥':['N','Y','W'],
            '닭갈비':['N','N','Y'],
            '치킨':['N','N','Y']
        };

        var realLi = ['짜장면', '스파게티', '국밥', '닭갈비', '치킨'];

        function start() {
            $(".start").hide();
            $(".question").show();
            next();
        }
        $("#A").click(function () {
            sList.push('Y');
            next();
        });

        $('#B').click(function () {
            sList.push('N');
            next();
        });

        $('#C').click(function () {
            sList.push('W');
            next();
        });

        $('#randomSelection').click(function () {
            var filteredLi = realLi.filter(function(x){
                return x !== undefined;
            });
            const randomElement = filteredLi[Math.floor(Math.random() * filteredLi.length)];
            alert(randomElement);
        });
        function next() {
            if (num == 4) {
                $(".question").hide();
                $('.result').show();
                var k = 0;
                for(var key in li){
                    for(var i=0; i<3; i++){
                        if(sList[i]=='Y')
                        {
                            if(li[key][i] == 'N')
                            {
                                delete realLi[k] 
                            }
                        }
                        else if(sList[i]=='N')
                        {
                            if(li[key][i] == 'Y')
                            {
                                delete realLi[k] 
                            }
                        }
                    }
                    k += 1;
                }

                var filteredLi = realLi.filter(function(x){
                    return x !== undefined;
                });
                $('#animal').html(filteredLi);
                console.log(filteredLi);
            } else {
                $(".progress-bar").attr('style', 'width: calc(100/3*' + num + '%)');
                $("#title").html(q[num]['title']);
                $('#type').val(q[num]['type']);
                $("#A").html(q[num]['A']);
                $("#B").html(q[num]['B']);
                $("#C").html(q[num]['C']);
                $('#sListShow').html(sList);
                num++;
            }
        }
    </script>
    <!-- Go to www.addthis.com/dashboard to customize your tools -->
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-61584fc2493860e1"></script>
</body>

</html>